<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Client Example</title>
</head>
<body>

<!-- HTML Form -->
<form id="dataForm">
    <label for="question">카테고리:</label>
    <input type="text" id="category" name="category" required><br>
    <input type="button" onclick="getTableNamesFromDatabase()">
    <input type="button" onclick="getLabelCountFromDatabase()">
   
    <div id="ad">sdsada</div>
    
</form>

<script>
let tableArray = new Array();
let countArray = new Array();
function getTableNamesFromDatabase() {
    // 클라이언트에서 서버로 HTTP POST 요청을 보내는 부분
    fetch('http://172.21.116.167:59999/getTableNamesFromDatabase', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
        },
        body: JSON.stringify({ databaseName: 'your_database_name' }), // 데이터베이스 이름을 전송
    })
        .then(response => {
            if (!response.ok) {
                throw new Error(`HTTP 오류! 상태: ${response.status}`);
            }
            return response.json();
        })
        .then(data => {
            // 데이터를 콘솔에 출력
            console.log('서버에서 받은 데이터:', data.result);
            data.result.forEach(tableInfo => {
                const tableName = tableInfo['Tables_in_데이터베이스'];
                console.log(tableName); // 각 테이블 이름에 대한 작업 수행
                tableArray.push(tableName);
            });
            //displayTableNames(tableArray);
        })
        .catch(error => {
            console.error('오류:', error);
            // JSON 데이터를 가져오지 못한 경우에 경고창 띄우기
            alert('서버에서 데이터를 가져오지 못했습니다. 나중에 다시 시도해주세요.');
        });
}

function getLabelCountFromDatabase() {
    // 클라이언트에서 서버로 HTTP POST 요청을 보내는 부분
    fetch('http://172.21.116.167:59999/getLabelCountFromDatabase', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
        },
        body: JSON.stringify(tableArray), // 데이터베이스 이름을 전송
    })
        .then(response => {
            if (!response.ok) {
                throw new Error(`HTTP 오류! 상태: ${response.status}`);
            }
            return response.json();
        })
        .then(data => {
            // 데이터를 콘솔에 출력
            countArray = data;
            console.log(typeof(new Array()));
            console.log(tableArray);
            console.log(countArray);
        })
        .catch(error => {
            console.error('오류:', error);
            // JSON 데이터를 가져오지 못한 경우에 경고창 띄우기
            alert('서버에서 데이터를 가져오지 못했습니다. 나중에 다시 시도해주세요.');
        });
}



</script>

</body>
</html>
